/* global angular */
angular.module("app").controller('BirthdaysController', function($scope, $http) {

  $scope.setUp = function() {
    var userDate = new Date();
    var month = userDate.getMonth() + 1;
    var day = userDate.getDate();

    $http({url: "/api/v1/birthdays.json", method: "GET", params: {userMonth: month, userDay: day}
     }).then(function successCallback(response) {
        // CHECK IF THERE ARE BIRTHDAYS
        $scope.children = response.data;
        console.log($scope.children)
        if ($scope.children.length == 0) {
          $scope.birthdays = false;
        } else {
          $scope.birthdays = true;
        }

      },
      function errorCallback(response) {
          console.log("Error on set-up");
      });
  };

  window.$scope = $scope;
});