<div ng-app="app">
  <div ng-controller="adminchildrenCtrl" ng-init="setup()">

    <div uib-alert ng-repeat="alert in alerts" ng-class="'alert-' + (alert.type || 'warning')" close="closeAlert($index)" dismiss-on-timeout="8000">{{alert.msg}}</div>

    <a href="/admin-dashboard">Users Index</a>
    <h2>Children:</h2>
    <div>
      <label>Filter by last name:</label>
      <input ng-model="last_nameFilter" list="names">

      <datalist id="names">
        <option ng-repeat="child in children track by $index">{{ child.last_name }}</option>
      </datalist>
    </div>
    <br>
    <div>
      <label>Sort by Registration:</label>
      <select ng-model="sortBy">
        <option value="-registered">Registered</option>
        <option value="registered">Not registered</option>
        <option value="accepted">Accepted</option>
        <option value="-accepted">Not Accepted</option>
      </select>
    </div>
    <br>

    <button ng-click="setOrderAttribute('id')">Order by creation time</button>
    <br>
    <br>
    <div class="row">
      <div class="col-md-4" ng-repeat="child in children | filter: {last_name: last_nameFilter} | orderBy: sortBy | orderBy:orderAttribute:isOrderDescending ">
        <div class="well">
          <h4>{{child.first_name}} {{child.last_name}}</h4>
          <hr>
          <p>Registered: {{child.registered}} </p>
          <p>Accepted: {{child.accepted}} </p>
          <form>
            <div>
              <label>Accept this child: </label>
              <input type="checkbox" ng-model="child.accepted" disableEntry: true >
              <input type="hidden" ng-model="child.id">
            </div>
            <br>
            <div class="submit">
              <input type="submit" ng-click="updateStatus(child.accepted, child.id)">
            </div>
          </form>
          <br>
        </div>
      </div>
    </div>
  </div>
</div>
